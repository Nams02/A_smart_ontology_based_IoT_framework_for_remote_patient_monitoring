# [Artificial intelligence‐powered decentralized framework for Internet of Things in Healthcare 4.0](https://doi.org/10.1002/ett.4245)

## Abstract
Remote patient monitoring and data management have gained much popularity in recent years because of their enhanced access to low-cost healthcare services. A cloud-based healthcare system provides numerous solutions for collecting patient data and offers on-demand well-managed reports to patients and healthcare providers. However, it equally suffers from single-point failure, security, privacy, and non-transparency issues with the data, impacting the continuity of the system. To resolve such concerns, this article proposes an artificial intelligence (AI)-enabled decentralized healthcare framework that accesses and authenticates Internet of Things (IoT) devices and create trust and transparency in patient healthcare records (PHR). ==The mechanism is based on the AI-enabled smart contracts== and the conceptualization of the public blockchain network. Alongside this, the framework identifies the malicious IoT nodes in the system. ==The experimental analyses are performed on the real-time test environment==, and ==significant improvements are suggested in terms of device energy consumption==, data request time, throughput, average latency, and transaction fee.

## Key concepts
#internet_of_things; #result/smart_contract; #smart_contract; #private_key; #artificial_intelligence; #result/public_key; #public_key; #application_binary_interface; #blood_glucose; #result/healthcare_system; #healthcare_system; #blood_pressure; #body_temperature; #glucose; #patient_monitoring; #bluetooth_low_energy; #cloud_computing; #real_time; #transactions_per_second; #elliptic_curve_digital_signature_algorithm; #personal_health_record

## Quote
> This article proposes a decentralized framework for healthcare data management that collects the remote patient medical data and maintain patient healthcare records leveraging on the blockchain technology

## Key points
- Internet of Things (IoT) and other related technologies such as artificial intelligence (AI), mixed augmented reality (MAR), and blockchain have revolutionized the concept of a smart ecosystem, where all life forms include the living and non-living, are linked to each other for the mutual sharing of information.[^1]
- public key (Pb) combined with Device ID (Did) helps to validate the transaction in the blockchain network
- This article proposes a decentralized framework for healthcare data management that collects the remote patient medical data and maintain patient healthcare records (PHR) leveraging on the blockchain technology
- An additional rule-based AI layer is integrated with smart contracts to recognize the malicious nodes and make intelligent decisions
- The proposed framework is tested on the real-time setup and the performance is evaluated in terms of time consumption of requests generated and registered, the energy consumption of the device, transaction throughput, average latency, and gas consumption


## Summary

### INTRODUCTION
Internet of Things (IoT) and other related technologies such as artificial intelligence (AI), mixed augmented reality (MAR), and blockchain have revolutionized the concept of a smart ecosystem, where all life forms include the living and non-living, are linked to each other for the mutual sharing of information.[^1].
IoT-based wearable healthcare devices are capable enough to capture and accumulate the patients healthcare data, but due to a lack of security standards for IoT, these devices can be hacked
It raises two major concerns of transparency and security of patient’s information, including the medical records and personal details.
Blockchain technology overcome these issues through its decentralized architecture and addresses the security and privacy concerns as it can store every sensitive information of nodes across the entire network.
Some bitcoin-based solutions have been proposed for the healthcare domain,[^14],[^15] there are issues such as high-power consumption, less throughput, and latency that still exists in these networks
These issues need to be addressed at the time of developing the healthcare system with blockchain technology.

### RELATED WORK
The existing research solutions regarding the centralized and decentralized healthcare system is illustrated.
The demerits of the centralized healthcare system and decentralized healthcare system are highlighted.
The proposed work is compared with the existing solutions

### Centralized healthcare system
Data management in the healthcare system represents a predominant process used to store and manage patient health information, which leads to providing medical details for the development of the vaccine, on-time, and an effective treatment plan.
The authors introduced the privacy preserving framework[^25],[^26] and re-encrypted the secure data sharing technique[^27] in the E-healthcare services
They are trying to improve the security and privacy in cloud-based healthcare data management and as hospitals are the primary guardian of the data in these kinds of management systems, this can create hurdles for the doctors, especially at the time of emergency, to access the patient information stored in database of the different hospitals.
To overcome this concern, academicians and industries have developed smart devices[^28],[^29] for personal health monitoring.
It suffers from a single point failure that makes the system more vulnerable and easier to lose the collected data

### Decentralized healthcare system
To address the security and privacy concern, cloud data hash[^30],[^31] is stored in the blockchain network.
These studies are endangered from the single point failure due to the server-client architecture, many studies are employed to accumulate the patient medical data in the distributed leader for addressing the single point failure issue.
The primary motive behind this system is to record smart contract events and provide notifications to healthcare professionals
It resolves the vulnerabilities issues in remote monitoring.
In other studies,[^36],[^37],[^38] the smart contract-based patient remote monitoring has been developed to create a transparent, trusted, and central serverless network for preventing frauds, data breaches in the PHR and maintain security and privacy

### Evaluation parameters
Time consumption, throughput, average latency, and transaction gas consumption analysis.
Differentiating from the existing works, the proposed framework in this article is designed for IoT-based health monitoring and maintains PHR records in the blockchain network.
A rule-based AI layer is integrated with a smart contract for the identification of the malicious nodes.
Five different parameters are used to evaluate the proposed framework.

### PROPOSED FRAMEWORK
The proposed framework is categorized into four different layers, namely, the rule-based AI system, main hospital, clinics, and remote patients layer.
The rule-based AI system’s main motive is to make a smart decision and find security breach and malicious data in the system.
Remote sensor nodes: Medical sensors such as BP, BG,[^41] as well as BT are used to monitor the elderly patient’s health condition on the routine basis and transfer their data through the integrated approach of IoT and blockchain technology.
Hospital layer: In this layer, the main hospital is worked as an information centre that stored every information of the patients such as patient’s unique ID, name, medical history, and prescribed medicines.
Blockchain allows creating trust, security, and privacy regarding the patient data

### Rule-based artificial intelligence
Rule-based AI systems are the smart systems that accomplish AI knowledge through rule-based models.[^42],[^43] These systems are deterministic and do not require a lot of data compared to other machine learning and deep learning systems.
There are two utmost important modules in the rule-based AI system, “a set of rules” and “a set of facts.”.
These system layers help to set up the agreement between the peers on the basics of the designed rules and facts.
If the initial part u and conclusion part v are considered, u results in v. This represents that if u is the favorable condition and v is the favorable condition as per the law of detachment and denoted as: As per the law of syllogism,[^44] if u results in v and v results in x, u results in x and denoted as:

### Developed IoT sensor node
Remote patient monitoring is a kind of health caregiving service that uses upgrade information technology to gather the patient’s real-time data as well as provide medical services for critically ill patients.[^45].
The developed IoT nodes, which are equipped with the BG, BT, and BP sensor share and store collected medical data in the blockchain network instead of the cloud.
An IoT based BG meter[^57] is considered for allowing the remote connection between patients and healthcare providers.
After the successful conversion of data, it is stored in the two bytes of temperature register that are located in the scratchpad memory
Before using this sensor with an IoT node, a calibration is required.
Afterward, the cuff deflated pressure, and blood allowed to flow in the artery again
This leads to creating a bunch of vibrations in the arteries and measured through the pressure sensor.
The values of BP and BG modifies as it depends on the patient health condition. (3) Identify the NaN, unfilled, and zero values: this layer helps to identify the problem in the sensor node

### Clinic layer
The clinic node works as a medium layer between the hospitals and IoT nodes.
It synchronizes with the hospitals for the patient’s information and registers new patients in the blockchain network.
Many solutions[^73],[^74],[^75] have been proposed to maintain medical health records via blockchain technology.
The traditional medical system has some limitations as follows: A patient often visits numerous hospitals for a health checkup.
It is necessary to maintain and keep medical records.
Patients have not maintained their medical records and hospitals are not willing to share their PHR.
Every time patients need to do a laboratory test due to the unavailability of medical history.
In the situation of emergency, the patient needs to wait until the result of their medical report

### Results
Data access, identify the normal and malicious node Parameters: mg/dL,◦C, mm/hg, Did, Pb, contract address, ABI first step verification if contract address && ABI= = true .
⊳ Checking deployed contract address and ABI Condition ack “true”; else request not send; checking IoT sensor node authentication and identify malicious node if Did && Pb == true .
⊳ Identification of Malicious Node end if end if checking sensors conditions and alert systems if mg/dL < 70 || mg/dL > 140 .
⊳ Checking Conditions for Patient Blood Pressure vout =/1024; else if mm/hg(s) < 60 || mm/hg(d) > 140 alert generated; end if Identify the NaN, unfilled and zero values if data == NaN || unfilled || zero .

### Results
Parameters: Did, Pb, Pupdation check the clinic node authentication if Did, Pb, contract address && ABI == true ⊳ Verification contract address, ABI, Device ID and Public Key device authenticate; Rejected the clinic node or malicious node; Retrieve patient medical record if Pid, Pb == true .
A clinical smart contract is being deployed to set up a connection with the IoT sensor node, main hospital, and blockchain network.
There are three major functions in the smart contract: (1) Clinic node authentication: To join the blockchain network, authentication is done using parameters such as Did, Pb, contract address, and ABI.
(2) Retrieve patient medical record: To check the visiting patient’s medical history, the clinic node sends Patient ID (Pid) with the Pb to the blockchain network.

### Hospital layer
The hospitals usually managed to visit patient’s healthcare data as well as provide healthcare services at the time of emergency and routine check-up.
The patients are usually preferred to visit the clinics as compared to the hospital.
It highly important that the hospitals should be synchronized with the clinics
To overcome these issues, blockchain technology allows creating the trust, transparency, and security of data between the hospitals and clinics.
Smart contract node is categorized into four different parts: (1) Create Pid:Hospital node sends a login request that includes deployed contract address and ABI.
The verification of this information is done at the blockchain network.

### Results
⊳ Verification contract address, ABI, Device ID or Patient ID and Public Key else if Pid, Pb, contract address and ABI == true ⊳ Verification contract address, ABI, Patient ID and Public Key update the patient data; end if the ack “True” For the Pid, the healthcare worker sends the patient information, which is stored at the blockchain.
If this information or parameter is not matched with the existing information, a unique Pid will be generated.

### Registration patient ID and device ID
Merkle tree is used to encrypt the blockchain data efficiently and safely which accelerate verification of the data.
Every executed transaction is linked with hash.
Merkle root is the subsequent outcome of these hashes.
Pid is registered through the Merkle root with a combination of patient name, unique identification, contact number, and home address.
Every parameter is hashed to generate the hash value.
Pid is the combination of these parameters’ hashed value.
The device details and MAC address are the hashed value that becomes a Merkle root in the case of the Did. The device details and MAC address are the hashed value that becomes a Merkle root in the case of the Did
These parameters are saved in the network without revealing their identity.
At the time of validation, Did with other parameters such as Pb, deployed contract address, and ABI

### Data authentication
There are mainly two steps for data authentication: (1) generating signature and (2) validation of message.
Generating signature: Cryptographic signatures are the main component of the blockchain network that is used to show validate ownership address without revealing its private key.
The elliptic curve digital signature algorithm (ECDSA)[^76] is applied to generate the digital signature from the two input parameters, namely, input message and private key (Pr).
The digital signature is a mathematical method used to validate the IoT device authentication and integrity of data transferred from the devices.
ECDSA algorithm is used to generate the digital signature for the IoT devices.
If Did and Pb, are matched, blockchain networks allow the message to authenticate

### Workflow of the system
Step 1: Hospital node sends the patient information (Pinf ) that includes patient name, unique identification, contact number, and home address and attached with the deployed smart contract and ABI.
The process to generate the Did is quite similar to the Pid. The hospital node sends the device information that includes device details and MAC address to the blockchain for the verifications.
Step 1: For the authentication of the remote IoT node, the device sends the request to the blockchain and this request includes the Did, deployed contract address, and ABI.
Step 1: To retrieve the patient medical history, the clinic node sends the authentication request to the blockchain network which consists of Pid, contract address, and ABI.
Step 2: To update the new information for the patient, the hospital node sends Pid with contract address, Pb, and ABI to the blockchain through AI rule-based smart contract.
Devices are allowed to update information, after the favorable authentication of the device

### Evaluation testbed
To evaluate the proposed approach, five different parameters are used such as time consumption, energy consumption, throughput, average latency, and gas consumption during the transactions.
Desktop acts as an RPC server, others act as a follower and remote monitoring devices.
In this experiment, the Ethereum platform works as a blockchain, and a smart contract helps to deploy the proposed work in the blockchain network.
Ganache[^77] is used in the study represented in this article, which provides Ethereum toolkit for testing and deploying the proposed approach and acts as a dummy public Ethereum blockchain.
Web3 library[^78] helps to connect the RPC server node with other IoT nodes.

### Evaluation outcomes
The experimentation of the proposed model is performed as follows: 4.2.1 Time consumption.
Time consumption refers to the minimum amount of time necessary by the IoT node to generate the request for the association with the network.
Time consumption of devices is measured at four different transaction points, first, 50th, 100th, and 200th transaction and the average transaction time is calculated.
Device 2 consumes more time because of its low computation power as compared to Device 1.
The reason behind less time consumption is the difference in computation power.
Device computational power is directly dependent on the time consumption for data requests or data registered at the blockchain network

### Energy consumption
Energy consumption or power consumption in the IoT nodes (Raspberry Pi’s), clinic, and hospital node, are considered at the time of generation of the data requests.
Energy consumption of the device is measured at the four different.
Energy consumption of the Device 1 and Device 2 is measured through the USB Tester[^79] and RAPL measurement tool[^80].
Power consumption of Device 3 and Device 4 is measured through IPPET81 and RAPL[^80].
To calculate the power consumption in the IoT devices, the difference between the power consumed by the IoT device at the time of data request and power consumed by the IoT node in the ideal state is considered

### Throughput and average latency
Throughput and latency are two important parameters that help to evaluate the blockchain network more precisely.
In this study, these parameters are calculated for the IoT devices (Raspberry-Pi).
Transaction throughput is the number of successful transactions committed by the blockchain network.
Latency is defined as the time difference between the successful transaction and transaction deployment time.
Latency is the difference between the successful transaction time (k2) and transaction deployed time (k1) (see Equation (5)).
The scalability is directly dependent on the throughput and latency of the network.
Only the IoT devices throughput and latency is calculated because the RPC server is deployed in Device 4 so there is no lagging data in the same machine.
There are four rounds of the transaction to calculate both throughput

### Transaction fee analysis
The IoT node contains three sensors such as BG, BT, and BP sensor, and every sensor consumes gas for mining their value at the blockchain network.
Gas refers to the fees that are required to execute a transaction in the Ethereum blockchain network.
This experiment sends the medical values in two ways: single transaction and multi-transaction.
The values of medical parameters include BG, BT, and BP which are combined in a string and are sent to the blockchain network.
The multi-transactions send the values of the medical parameters separately and serially in the form of an integer.
Single transaction consumes less amount of gas as compared to the multi-transaction in first, 50th, 100th, 150th, and 200th transaction.
At 200th transaction, single transaction used approximately three times less gas compared with the multi-transaction

### CONCLUSION
Decentralized healthcare management has rapidly acquired attention as it can provide transparency, trust, security, and privacy in the patient’s healthcare data.
This article proposes a decentralized framework for healthcare data management that collects the remote patient medical data and maintain PHR leveraging on the blockchain technology.
The proposed framework is tested on the real-time setup and the performance is evaluated in terms of time consumption of requests generated and registered, the energy consumption of the device, transaction throughput, average latency, and gas consumption.
Investigation on trustworthy AI with the proposed framework can be done to make the system more reliable and design more lightweight algorithms for the reduction of energy and gas consumption.
DATA AVAILABILITY STATEMENT Data from simulations available on request from the authors


## Counterpoint to earlier claims
- In another work, the authors[^19] presented a new approach for the secure sharing of PHR in cloud computing called “CP-ABSC” that integrates the goodness of the digital signature and encryption technique. ==However, the article[^20] highlighted the demerits of the CP-ABSC and proposed a new scheme to overcome the public ciphertext verification issue in this study==

## Contributions
- Decentralized healthcare management has rapidly acquired attention as it can provide transparency, trust, security, and privacy in the patient’s healthcare data. Furthermore, blockchain’s distributed and shared nature save the network from a single point of failure. This article proposes a decentralized framework for healthcare data management that collects the remote patient medical data and maintain PHR leveraging on the blockchain technology. An additional rule-based AI layer is integrated with smart contracts to recognize the malicious nodes and make intelligent decisions. The proposed framework is tested on the real-time setup and the performance is evaluated in terms of time consumption of requests generated and registered, the energy consumption of the device, transaction throughput, average latency, and gas consumption. In the future, investigation on trustworthy AI with the proposed framework can be done to make the system more reliable and design more lightweight algorithms for the reduction of energy and gas consumption.

## Data and code
- DATA AVAILABILITY STATEMENT Data from simulations available on request from the authors. ORCID Vishal Sharma https://orcid.org/0000-0001-7470-6506
